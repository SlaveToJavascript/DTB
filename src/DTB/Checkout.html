<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>Checkout</title>
  <meta content="" name="descriptison">
  <meta content="" name="keywords">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/icofont/icofont.min.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/owl.carousel/assets/owl.carousel.min.css" rel="stylesheet">
  <link href="assets/vendor/venobox/venobox.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
 
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">


  <!-- =======================================================
  * Template Name: Bocor - v2.1.0
  * Template URL: https://bootstrapmade.com/bocor-bootstrap-template-nice-animation/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->
</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header">
    <div class="container d-flex align-items-center">

      <div class="logo mr-auto">
        <h1 class="text-light"><a href="index.html">DTB<span>.</span></a></h1>
        <!-- Uncomment below if you prefer to use an image logo -->
        <!-- <a href="index.html"><img src="assets/img/logo.png" alt="" class="img-fluid"></a>-->
      </div>

      <nav class="nav-menu d-none d-lg-block">
        <ul id = "navigation">
          <li class="drop-down"><a href="index.html" class = "active">Home</a>
            <ul>
              <li><a href="#about">About Us</a></li>
              <li><a href="#insurance">Insurance Products</a></li>
              <li><a href="#team">Team</a></li>
            </ul>
          </li>  
          <li class="drop-down"><a href="#" class = "active">Insurance Products</a>
            <ul>
              <li><a href="products_maid.html">Maid Insurance</a></li>
              <li><a href="products_travel.html">Travel Insurance</a></li>
              <li><a href="products_accident.html">Accident Insurance</a></li>
            </ul>
          </li>
          <li><a href = "cart.html"> Your Cart <i class="fa fa-shopping-cart"style="font-size:17px"></i> </a></li>
          
          <li class="get-started"><a href= login.html>Amey Rathi</a></li>
          <li><a href = "login.html" class = "nav-link link-scroll" id = "logout">Logout</a></li>
        </ul>
      </nav>
      <!-- nav-menu -->

    </div>
  </header><!-- End Header -->

   <!-- ======= Welcome User ======= -->
   <div class="alert alert-light" role="alert">
    <strong>Welcome User!</strong>
  </div>

  <main id="main">

    <!-- ======= Breadcrumbs Section ======= -->
    <section class="breadcrumbs">
      <div class="container">
        <div class="d-flex justify-content-between align-items-center">
          <h2>Checkout</h2>
          <ol>
            <li><a href="index.html">Home</a></li>
            <li><a href="cart.html">Your Cart</a></li>
            <li>Checkout</li>
          </ol>
        </div>
      </div>
    </section>
    <!-- End Breadcrumbs Section -->

    <section class="inner-page">
      
      <div class="container">
        <table class="table table-hover">
          <h4>Your Cart</h4>
          <thead>
            <tr>
              <th scope="col">Insurance Policy</th>
              <th scope="col">Price</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td id="name"></td>
              <td id="price"></td>
            </tr>
          </tbody>
        </table>
    </section>
      <section class="inner-page">
        <div class="bs-example">
          <h4 class="ml-3">Payment options</h4>
          <div class="accordion" id="accordionExample">
              <div class="card">
                  <div class="card-header" id="headingOne">
                      <h2 class="mb-0">
                          <button type="button" class="btn btn-link" data-toggle="collapse" data-target="#collapseOne"><i class="fa fa-plus"></i> Payment via tBank Services (Recommended)</button>									
                      </h2>
                  </div>
                  <div id="collapseOne" class="collapse" aria-labelledby="headingOne" data-parent="#accordionExample">
                      <div class="card-body">
                        <h3 class="mt-3 mb-3">Login to tBank (Mandatory)</h3>
                        <label id="Title"></label>
                        <!-- Authentication -->
                        <div id="loginForm" class="col-md-6">
                          <form class="form-horizontal well" style="padding-bottom: 0px;">
                            <div class="input-group mb-3">
                              <div class="input-group-prepend">
                              <span class="input-group-text">User ID</span>
                              </div>
                              <input id="userID" type="text" class="form-control">
                              <div class="input-group-prepend">
                              <span class="input-group-text">Password</span>
                              </div>
                              <input id="PIN" type="password" class="form-control">
                            </div>
                            <div class="form-group">
                              <button id="Login" type="button" class="btn btn-primary">Login</button>
                              <button type="reset" class="btn btn-default">Clear</button>
                            </div> 
                          </form>   
                      </div>
                      <hr/>

                      <!-- Bill Payment API-->
                      <h2 style="color:#937851">1. Payment via tBank Account</h2>
                      <div class="col-md-6">
                        <form class="form-horizontal well" style="padding-bottom: 0px;">
                          <div class="input-group mb-3">
                            <div class="input-group-prepend">
                            <span class="input-group-text">Account FROM</span>
                            </div>
                            <input id="accountFrom" type="text" class="form-control" placeholder=" eg. 6890">
                            <input id="accountTo" type="text" value= "6699" class="form-control" hidden>
                          </div>
                          <div class="input-group mb-3">
                            <div class="input-group-prepend">
                            <span class="input-group-text">Transaction Amount</span>
                            </div>
                            <input id="transactionAmount" type="text" class="form-control">
                          </div>
                            <input id="transactionReferenceNumber" value="100" type="text" class="form-control" placeholder="10" hidden>
                          <div class="input-group mb-3">
                            <div class="input-group-prepend">
                            <span class="input-group-text">Narrative</span>
                            </div>
                            <input id="narrative" type="text" value="bill" class="form-control" placeholder="10">
                          </div>
                          <div style="color: red;" id="error"></div>
                          <div class="form-group">
                            <button id="Send" type="button" class="btn btn-primary Send">Pay</button>
                            <button type="reset" class="btn btn-default">Clear</button>
                          </div>                  
                        </form>
                    </div>
                    <!-- Loan API -->

                    <h2 style="color:#937851">2. Payment via tBank Loans</h2>
                    <br>
                    <h5> Calculate loan details now!</h5>
                    <br/>
                <div class="col-md-6">
                  <form>
                    <input id="LoanproductID" type="text" class="form-control" value="201" hidden/>
                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                      <span class="input-group-text">Loan Amount</span>
                      </div>
                      <input id="requestedAmount" type="text" class="form-control">
                    </div>
                    <div class="input-group mb-3">
                      <div class="input-group-prepend">
                      <span class="input-group-text">Number of Months</span>
                      </div>
                      <input id="LoannumberOfMonths" type="text" class="form-control">
                    </div>               
                    <div class="form-group">
                      <button id="RequestLoan" type="button" class="btn btn-primary">Calculate Payment!</button>
                      <button type="Lreset" class="btn btn-default">Clear</button>
                    </div>
                    <div style="color: red;" id="LoanRequestError"></div>
                  </form>
                  </div>

                  <!-- Apply Loan -->
                  <h5>Interested? Apply for a loan now!</h5>
        <!-- <h4>Get a loan from tBank to pay your insurance!</h4> -->
        <!-- <a href="Loans.html" class="btn btn-primary btn-lg mb30">Calculate attractive offers!</a> -->
        <!-- <br><br><br><br> -->
            <div class="col-md-6">
              <form class="form-horizontal well" style="padding-bottom: 0px;">
                <input id="productID" type="text" class="form-control" value="205" hidden/>
                <input id="LOTP" type="text" class="form-control" placeholder="10" value="999999" hidden>
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                  <span class="input-group-text">Account</span>
                  </div>
                  <input id="settlementAccount" type="text" class="form-control" placeholder=" eg. 6890">
                </div>
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                  <span class="input-group-text">Loan Amount</span>
                  </div>
                  <input id="loanAmount" type="text" class="form-control">
                </div>
                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                  <span class="input-group-text">Number of Months</span>
                  </div>
                  <input id="numberOfMonths" type="text" class="form-control">
                </div>

                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                  <span class="input-group-text">Loan Purpose</span>
                  </div>
                  <input id="loanPurpose" type="text" class="form-control">
                </div>

                <div class="input-group mb-3">
                  <div class="input-group-prepend">
                  <span class="input-group-text">Asset Value</span>
                  </div>
                  <input id="assetValue" type="text" class="form-control">
                </div>
                <input id="currency" value="SGD" type="text" class="form-control" hidden>           
                <div style="color: red;" id="LoanError"></div>
                <div class="form-group">
                  <button id="LSend" type="button" class="btn btn-primary">Apply for a loan!</button>
                  <button type="Lreset" class="btn btn-default">Clear</button>
                </form>
                </div>
                </div>
               </div>
              </div>
              <div class="card">
                  <div class="card-header" id="headingTwo">
                      <h2 class="mb-0">
                          <button type="button" class="btn btn-link collapsed" data-toggle="collapse" data-target="#collapseTwo"><i class="fa fa-plus"></i> Credit Card Payment</button>
                      </h2>
                  </div>
                  <div id="collapseTwo" class="collapse show" aria-labelledby="headingTwo" data-parent="#accordionExample">
                      <div class="card-body">
                        <div class="row">
                          <div class="col-lg-8 col-md-8 col-sm-7 col-xs-12">
                            <h2>2. Pay using Credit Card</h2>
                            <br>    

                        <div class="input-group mb-3">
                          <h2>Payment</h2>
                            <div class="input-group mb-3">
                            <div class="input-group-prepend">
                            <span class="input-group-text" id="nameoncard">Name on card</span>
                            </div>
                            <input type="text" class="form-control" placeholder="John Doe" aria-label="nameoncard" aria-describedby="basic-addon1">
                          </div>
                          
                          <div class="input-group mb-3">
                            <div class="input-group-prepend">
                            <span class="input-group-text" id="nameoncard">Credit card number</span>
                            </div>
                            <input type="text" class="form-control" placeholder="11223344556677" aria-label="credit card number" aria-describedby="basic-addon1">
                          </div>
                          
                          <div class="input-group mb-3">
                            <div class="input-group-prepend">
                            <span class="input-group-text" id="expiration">Expiration</span>
                            </div>
                            <input type="text" class="form-control" placeholder="04/22" aria-label="expiration" aria-describedby="basic-addon1">
                
                            <div class="input-group-prepend">
                            <span class="input-group-text" id="cvv">CVV</span>
                            </div>
                            <input type="text" class="form-control" placeholder="650" aria-label="cvv" aria-describedby="basic-addon1">
                          </div>
                        
                        </div>
                        
                        <hr>
                          
                        <div class="custom-control custom-checkbox">
                          <input type="checkbox" class="custom-control-input" id="customCheck1">
                          <label class="custom-control-label" for="customCheck1">I agree to the above terms & condition</label>
                        </div>
                        
                        <hr>
                          
                                    <a href="#" class="btn btn-primary btn-lg mb30">Pay</a>
                                </div>
                
                  
                                
                            </div>
                      </div>
                  </div>
              </div>
          </div>
      </div>

<!-- javascript libraries
======================================== -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
  $("#transactionAmount").val(sessionStorage.getItem("price"));
  $("#transactionAmount").prop("disabled", true);

  $("#requestedAmount").val(sessionStorage.getItem("price"));
  $("#requestedAmount").prop("disabled", true);

  $("#loanAmount").val(sessionStorage.getItem("price"));
  $("#loanAmount").prop("disabled", true);
  

    $("#Login").click(function (event) {
      (function() {
        console.log('Request initiated!')

          // set service header values
          var serviceName = "loginCustomer";
          var userID = document.getElementById("userID").value;
          var PIN = document.getElementById("PIN").value;
          var OTP = '999999';
          
          // set request parameters
          var headerObj = {
              Header: {
                  serviceName: serviceName,
                  userID: userID,
                  PIN: PIN,
                  OTP: OTP
              }
          };
          var header = JSON.stringify(headerObj);

          // setup http request
          var xmlHttp = new XMLHttpRequest();
          if (xmlHttp === null){
              alert("Browser does not support HTTP request.");
              return;
          }
          xmlHttp.open("POST", getApiURL()+"?Header="+header, true);
          xmlHttp.timeout = 5000;

          // setup http event handlers
          xmlHttp.onreadystatechange = function() {
              if (xmlHttp.readyState === 4 && xmlHttp.status === 200) {
                  responseObj = JSON.parse(xmlHttp.responseText);
                  console.log(responseObj);
                  serviceRespHeader = responseObj.Content.ServiceResponse.ServiceRespHeader;
                  globalErrorID = serviceRespHeader.GlobalErrorID;
                  if (globalErrorID !== "010000"){
                      showErrorModalLoanRequest(serviceRespHeader.ErrorDetails);
                  }
                  else{
                    // get data
                    alert("You have been logged in!")
                    ServiceResponse = responseObj.Content.ServiceResponse;
                    LoginOTPAuthenticateResponse = ServiceResponse["Login_OTP_Authenticate-Response"];
                    BankID = LoginOTPAuthenticateResponse.BankID;
                    CustomerID = LoginOTPAuthenticateResponse.CustomerID;

                    // display data
                    //document.getElementById("BankID").value = "*" + globalErrorID + "*";
                    sessionStorage.setItem("BankID", BankID);
                    sessionStorage.setItem("CustomerID", CustomerID);
                    sessionStorage.setItem("UserID", userID);
                    sessionStorage.setItem("PIN", PIN);

                    document.getElementById("Title").innerHTML = 'You are logged in as tBank user: ' + sessionStorage.getItem("UserID");
                    // $("#userID").prop("disabled", true);
                    // $("#PIN").prop("disabled", true);
                    $("#loginForm").hide();
                    // document.getElementById("BankID").value = BankID;
                    // document.getElementById("CustomerID").value = CustomerID;
                  }
              }
          };
          xmlHttp.ontimeout = function (e) {
              showErrorModal("Timeout invoking API.");
              return;
          };					
          // send the http request
          xmlHttp.send();

      })();
  });
    

    $("#RequestLoan").click(function (event) {
      (function() {
        console.log('Request initiated!')

          // set service header values
          var serviceName = "calculateLoanInstallment";
          var userID = sessionStorage.getItem("UserID");
          var PIN = sessionStorage.getItem("PIN");
          var OTP = '999999';
          
          // get and validate form values
          var ProductID = document.getElementById("LoanproductID").value;
          if (ProductID === ""){
              showErrorModalLoanRequest("Product ID cannot be blank.");
              return;  
          }
          var Principle = document.getElementById("requestedAmount").value;
          if (Principle === ""){
              showErrorModalLoanRequest("Principle cannot be blank.");
              return;  
          }
          var NumberOfMonths = document.getElementById("LoannumberOfMonths").value;
          if (NumberOfMonths === ""){
              showErrorModalLoanRequest("Number of Months cannot be blank.");
              return;  
          }
          // set request parameters
          var headerObj = {
              Header: {
                  serviceName: serviceName,
                  userID: userID,
                  PIN: PIN,
                  OTP: OTP
              }
          };
          var contentObj = {
                  productID: ProductID,
                  principle: Principle,
                  numberOfMonths: NumberOfMonths
              }
          var header = JSON.stringify(headerObj);
          var content = JSON.stringify(contentObj);

          // setup http request
          var xmlHttp = new XMLHttpRequest();
          if (xmlHttp === null){
              alert("Browser does not support HTTP request.");
              return;
          }
          xmlHttp.open("POST", getApiURL()+"?Header="+header+"&Content="+content, true);
          xmlHttp.timeout = 5000;

          // setup http event handlers
          xmlHttp.onreadystatechange = function() {
              if (xmlHttp.readyState === 4 && xmlHttp.status === 200) {
                  responseObj = JSON.parse(xmlHttp.responseText);
                  console.log(responseObj);
                  serviceRespHeader = responseObj.Content.ServiceResponse.ServiceRespHeader;
                  globalErrorID = serviceRespHeader.GlobalErrorID;
                  if (globalErrorID !== "010000"){
                      showErrorModalLoanRequest(serviceRespHeader.ErrorDetails);
                  }
                  else{
                    // get data
                    instalmentResponse = responseObj.Content.ServiceResponse.InstallmentResponse;
                    monthlyInstalment = instalmentResponse.MonthlyInstallment;
                    maturityDate = instalmentResponse.MaturityDate;
                    interest = instalmentResponse.Interest;
                    interestRate = instalmentResponse.InterestRate;
                  
                    // display data
                    document.getElementById("monthlyInstalment").innerHTML = monthlyInstalment;
                    document.getElementById("maturityDate").innerHTML = maturityDate;
                    document.getElementById("interest").innerHTML = interest;
                    document.getElementById("interestRate").innerHTML = interestRate;

                    showLoanModal();
                  }
                
                  
                  
                  
                  // enable Send button
                  document.getElementById("Send").disabled = false;
              }
          };
          xmlHttp.ontimeout = function (e) {
              showErrorModal("Timeout invoking API.");
              return;
          };					

          // send the http request
          xmlHttp.send();

      })();
  });

      $("#LSend").click(function (event) {
            (function() {
              console.log('Send 2 is clicked!')

                // set service header values
                var serviceName = "applyForLoan";
                var userID = sessionStorage.getItem("UserID")
                var PIN = sessionStorage.getItem("PIN");
                var OTP = document.getElementById("LOTP").value;
                
                // get and validate form values
                var productID = document.getElementById("productID").value;
                if (productID === ""){
                    showErrorModalLoan("Product ID cannot be blank.");
                    return;  
                }
                var loanPurpose = document.getElementById("loanPurpose").value;
                if (loanPurpose === ""){
                    showErrorModalLoan("Loan Purpose cannot be blank.");
                    return;  
                }
                var loanAmount = document.getElementById("loanAmount").value;
                if (loanAmount === ""){
                    showErrorModalLoan("Loan Amount cannot be blank.");
                    return;  
                }
                var numberOfMonths = document.getElementById("numberOfMonths").value;
                if (numberOfMonths === ""){
                    showErrorModalLoan("Number of Months cannot be blank.");
                    return;  
                }
                var assetValue = document.getElementById("assetValue").value;
                if (assetValue === ""){
                    showErrorModalLoan("Asset Value cannot be blank.");
                    return;  
                }
                var title = 'amey'
                // document.getElementById("title").value;
                if (title === ""){
                    showErrorModalLoan("Title cannot be blank.");
                    return;  
                }
                var currency = document.getElementById("currency").value;
                if (currency === ""){
                    showErrorModalLoan("Currency cannot be blank.");
                    return;  
                }
                var settlementAccount = document.getElementById("settlementAccount").value;
                if (settlementAccount === ""){
                    showErrorModalLoan("Settlement Account cannot be blank.");
                    return;  
                }
                
                // disable Send button
                // document.getElementById("Send").disabled = true;

                // set request parameters
            
                var headerObj = {
                    Header: {
                        serviceName: serviceName,
                        userID: userID,
                        PIN: PIN,
                        OTP: OTP
                    }
                };
                var contentObj = {
                    Content: {
                        productID: productID,
                        loanPurpose: loanPurpose,
                        loanAmount: loanAmount,
                        numberOfMonths: numberOfMonths,
                        assetValue: assetValue,
                        title: title,
                        currency: currency,
                        settlementAccount: settlementAccount
                    }
                };
                var header = JSON.stringify(headerObj);
                var content = JSON.stringify(contentObj);
                console.log(header);

                // setup http request
                var xmlHttp = new XMLHttpRequest();
                if (xmlHttp === null){
                    alert("Browser does not support HTTP request.");
                    return;
                }
                xmlHttp.open("POST", getApiURL()+"?Header="+header+"&Content="+content, true);
                xmlHttp.timeout = 5000;

                // setup http event handlers
                xmlHttp.onreadystatechange = function() {
                    if (xmlHttp.readyState === 4 && xmlHttp.status === 200) {
                        responseObj = JSON.parse(xmlHttp.responseText);
                        console.log(responseObj);
                        serviceRespHeader = responseObj.Content.ServiceResponse.ServiceRespHeader;
                        globalErrorID = serviceRespHeader.GlobalErrorID;
                        console.log(globalErrorID)
                        if (globalErrorID === "010041"){
                            console.log('Confirmed!');
                            showLoanConfirmation();
                            return;
                        }
                        else if (globalErrorID !== "010000"){
                            showErrorModalLoan(serviceRespHeader.ErrorDetails);
                            return;
                        }
                        else{
                          console.log('Confirmed!');
                          showLoanConfirmation();
                        }
                        
                        // get data
                        accountID = responseObj.Content.ServiceResponse.accountID._content_;
                        
                        // display data
                        document.getElementById("accountID").innerHTML = accountID;

                        // enable Send button
                        // document.getElementById("Send").disabled = false;
                    }
                };
                xmlHttp.ontimeout = function (e) {
                    showErrorModalLoan("Timeout invoking API.");
                    return;
                };					

                // send the http request
                xmlHttp.send();

            })();
        });

      

      /*----------------------------------------
       * [Send] button clicked
       */
      $(".Send").click(function (event) {
          (function() {
            console.log('Send 1 is clicked!')

              // set service header values
              var serviceName = "billPayment";
              var userID = sessionStorage.getItem("UserID")
              var PIN = sessionStorage.getItem("PIN")
              var OTP = '999999'
              
              // get and validate form values
              var accountFrom = document.getElementById("accountFrom").value;
              if (accountFrom === ""){
                  showErrorModal("Account FROM cannot be blank.");
                  return;  
              }
              var accountTo = document.getElementById("accountTo").value;
              if (accountTo === ""){
                  showErrorModal("Account TO cannot be blank.");
                  return;  
              }
              var transactionAmount = document.getElementById("transactionAmount").value;
              if (transactionAmount === ""){
                  showErrorModal("Transaction Amount cannot be blank.");
                  return;  
              }
              var transactionReferenceNumber = document.getElementById("transactionReferenceNumber").value;
              var narrative = document.getElementById("narrative").value;

              // disable Send button
              // document.getElementById("Send").disabled = true;

              // set request parameters
              var headerObj = {
                  Header: {
                      serviceName: serviceName,
                      userID: userID,
                      PIN: PIN,
                      OTP: OTP
                  }
              };
              var contentObj = {
                  Content: {
                      accountFrom: accountFrom,
                      accountTo: accountTo,
                      transactionAmount: transactionAmount,
                      transactionReferenceNumber: transactionReferenceNumber,
                      narrative: narrative
                  }
              };
              var header = JSON.stringify(headerObj);
              var content = JSON.stringify(contentObj);

              // setup http request
              var xmlHttp = new XMLHttpRequest();
              if (xmlHttp === null){
                  alert("Browser does not support HTTP request.");
                  return;
              }
              xmlHttp.open("POST", getApiURL()+"?Header="+header+"&Content="+content, true);
              xmlHttp.timeout = 5000;

              // setup http event handlers
              xmlHttp.onreadystatechange = function() {
                  if (xmlHttp.readyState === 4 && xmlHttp.status === 200) {
                      responseObj = JSON.parse(xmlHttp.responseText);
                      console.log(responseObj);
                      serviceRespHeader = responseObj.Content.ServiceResponse.ServiceRespHeader;
                      globalErrorID = serviceRespHeader.GlobalErrorID;
                      // if (globalErrorID === "010041"){
                        //  showOTPModal();
                      //     return;
                      // }
                      if (globalErrorID !== "010000"){
                          showErrorModal(serviceRespHeader.ErrorDetails);
                          return;
                      }
                      
                      // get data
                      transactionID = responseObj.Content.ServiceResponse.TransactionID._content_;
              

                      // display data
                      document.getElementById("transactionID").innerHTML = transactionID;
                      $("#confirmationModal").modal('show');
                      // document.getElementById("balanceBefore").value = addCommas(balanceBefore);
                      // document.getElementById("balanceAfter").value = addCommas(balanceAfter);
                      
                      // enable Send button
                      // document.getElementById("Send").disabled = false;
                  }
              };
              xmlHttp.ontimeout = function (e) {
                  showErrorModal("Timeout invoking API.");
                  return;
              };					

              // send the http request
              xmlHttp.send();

          })();
      });
      
      var nameNode = document.getElementById('name');
      nameNode.appendChild(document.createTextNode(sessionStorage.getItem("item")));
      var priceNode = document.getElementById('price');
      priceNode.appendChild(document.createTextNode("$" + parseFloat(sessionStorage.getItem("price")).toFixed(2)));

      /* ----------------------------------------
       * error model close button clicked
       */

  function showLoanModal(){
    console.log('Opening modal');
    $("#LoanRequestModal").modal('show');
  }

  function showLoanConfirmation(){
    $("#LoanModal").modal('hide');
    console.log('Opening modal');
    $("#LoanConfirmationModal").modal('show');
  }

  function showErrorModalLoan(error){
    document.getElementById("LoanError").innerHTML = error;
  }

  function showErrorModalLoanRequest(error){
    document.getElementById("LoanRequestError").innerHTML = error;
  }

  function showErrorModal(error){
    document.getElementById("error").innerHTML = error;
  }
  function getApiURL(){
      return "http://tbankonline.com/SMUtBank_API/Gateway";
  }

  function showOTPModal(){
    $("#otpModal").modal('show');
  }

  $(".confirmation").click(function(){
    $("#otpModal").modal('hide');
    $("#confirmationModal").modal('show');
  });

  // Add minus icon for collapse element which is open by default
  $(".collapse.show").each(function(){
        	$(this).prev(".card-header").find(".fa").addClass("fa-minus").removeClass("fa-plus");
        });
        
        // Toggle plus minus icon on show hide of collapse element
        $(".collapse").on('show.bs.collapse', function(){
        	$(this).prev(".card-header").find(".fa").removeClass("fa-plus").addClass("fa-minus");
        }).on('hide.bs.collapse', function(){
        	$(this).prev(".card-header").find(".fa").removeClass("fa-minus").addClass("fa-plus");
        });

})


</script>

        <!-- End tBank API for direct debit -->
        <div class="container">
        <div class="col-md-6">
        


        
        

                <!-- loans api  -->







                <!-- modals and functions -->
                <div id="LoanRequestModal" class="modal" tabindex="-1" role="dialog">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">View your loan details</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <p class="mb-2 mt-2"><b>Monthly Installment: </b>$<label id="monthlyInstalment"></label></p>
                        <p class="mt-2"><b>Maturity Date: </b><label id="maturityDate"></label></p>
                        <p class="mt-2"><b>Interest:</b> $<label id="interest"></label></p>
                        <p class="mb-2 mt-2"><b>Interest Rate: </b><label id="interestRate"></label>%/p.a.</p>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">OK</button>
                      </div>
                    </div>
                  </div>
                </div>

                <div id="otpModal" class="modal" tabindex="-1" role="dialog">
                  <div class="modal-dialog" role="document">
                    <div class="modal-content">
                      <div class="modal-header">
                        <h5 class="modal-title">2FA Authorisation</h5>
                        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                          <span aria-hidden="true">&times;</span>
                        </button>
                      </div>
                      <div class="modal-body">
                        <p>Please enter the OTP below</p>
                        <p>
                          <input id="OTP" type="text" class="form-control" placeholder="10">
                        </p>
                      </div>
                      <div class="modal-footer">
                        <button type="button" class="btn btn-primary Send confirmation">Verify</button>
                        <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
                      </div>
                    </div>
                  </div>
                </div>
                <div id="confirmationModal" class="modal fade">
                  <div class="modal-dialog modal-confirm">
                    <div class="modal-content">
                      <div class="modal-header">				
                        <h4>Awesome!</h4>	
                      </div>
                      <div class="modal-body">
                        <p class="text-center">Your payment has been confirmed!</p>
                        <p class="text-center"> Transaction ID is <label id="transactionID"></label> </p>
                        <p class="text-center">You will receive a confirmation email soon!</p>
                      </div>
                      <div class="modal-footer">
                        <button onclick="window.location='./index.html'" class="btn btn-success btn-block" data-dismiss="modal">OK</button>
                      </div>
                    </div>
                  </div>
                </div>  
                
                <div id="LoanConfirmationModal" class="modal fade">
                  <div class="modal-dialog modal-confirm">
                    <div class="modal-content">
                      <div class="modal-header">
                        <div class="icon-box">
                          <i class="material-icons">&#xE876;</i>
                        </div>				
                        <h4>Awesome!</h4>	
                      </div>
                      <div class="modal-body">
                        <p class="text-center">Your have successfully applied for a loan</p>
                        <p class="text-center"> Loan Account ID is <label id="accountID"></label> </p>
                      </div>
                      <div class="modal-footer">
                        <button onclick="window.location='./index.html'" class="btn btn-success btn-block" data-dismiss="modal">OK</button>
                      </div>
                    </div>
                  </div>
                </div>  
                
              </form>
              
              
          </div>
          
      </div>
        
        
      </div>
      </section>

  </main><!-- End #main -->

  <!-- ======= Footer ======= -->
  <footer id="footer">

    <div class="footer-top">

      <div class="container" data-aos="fade-up">

        <div class="row  justify-content-center">
          <div class="col-lg-6">
            <h3>DTB</h3>
          </div>
        </div>

        <div class="row footer-newsletter justify-content-center">
            
            Thank you for visiting our website! We hope you found our insurance products useful.
           </div>
        </div>

        <div class="social-links">
          <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
          <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
          <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
          <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
          <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
        </div>

      </div>
    </div>

    <div class="container footer-bottom clearfix">
      <div class="copyright">
        &copy; Copyright <strong><span>DTB</span></strong>. All Rights Reserved
      </div>
      <div class="credits">
        <!-- All the links in the footer should remain intact. -->
        <!-- You can delete the links only if you purchased the pro version. -->
        <!-- Licensing information: https://bootstrapmade.com/license/ -->
        <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/bocor-bootstrap-template-nice-animation/ -->
        <!-- Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a> -->
      </div>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top"><i class="icofont-simple-up"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/jquery/jquery.min.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/owl.carousel/owl.carousel.min.js"></script>
  <script src="assets/vendor/venobox/venobox.min.js"></script>
  <script src="assets/vendor/aos/aos.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>